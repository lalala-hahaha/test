const toggleSwitches=document.querySelectorAll(".toggle-switch"),statusText=document.getElementById("status");async function fetchToggleStatus(){const t=await fetch("https://mr4xa3bnuh567e5gbmbeyl5xdq0lpdoh.lambda-url.ap-southeast-1.on.aws/"),e=await t.json();return console.log(e),e}async function updateToggleStatus(t,e){let a=e?"1":"0";await fetch("https://mr4xa3bnuh567e5gbmbeyl5xdq0lpdoh.lambda-url.ap-southeast-1.on.aws/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pid:t,action:a})})}async function initializeToggles(){try{const t=await fetchToggleStatus();toggleSwitches.forEach((e=>{const a=e.dataset.id,o=t[a];e.checked="1"===o,e.addEventListener("change",(async()=>{const t=e.checked;statusText.textContent=`Item ${a} is ${t?"ON":"OFF"}`,await updateToggleStatus(a,t)}))}))}catch(t){console.error("Failed to initialize toggles:",t)}}initializeToggles();